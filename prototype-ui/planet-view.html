<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planet Simulation Interface</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #0f0;
            overflow: hidden;
        }
        
        #mainContainer {
            display: grid;
            grid-template-columns: 250px 1fr 300px;
            grid-template-rows: 60px 1fr 200px;
            height: 100vh;
            gap: 2px;
            background: #111;
        }
        
        #header {
            grid-column: 1 / -1;
            background: #1a1a1a;
            padding: 15px;
            border-bottom: 2px solid #0f0;
        }
        
        #header h1 {
            font-size: 24px;
            color: #0ff;
        }
        
        #planetInfo {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
        }
        
        #toolPanel {
            background: #1a1a1a;
            padding: 15px;
            overflow-y: auto;
            border-right: 2px solid #0f0;
        }
        
        .tool-section {
            margin-bottom: 20px;
            border: 1px solid #333;
            padding: 10px;
        }
        
        .tool-section h3 {
            color: #0ff;
            margin-bottom: 10px;
            font-size: 14px;
            border-bottom: 1px solid #333;
            padding-bottom: 5px;
        }
        
        .tool-button {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            background: #222;
            color: #0f0;
            border: 1px solid #0f0;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.2s;
        }
        
        .tool-button:hover {
            background: #0f0;
            color: #000;
        }
        
        .tool-button.active {
            background: #0ff;
            color: #000;
            border-color: #0ff;
        }
        
        #mapCanvas {
            background: #000;
            cursor: crosshair;
            border: 2px solid #0f0;
        }
        
        #dataPanel {
            background: #1a1a1a;
            padding: 15px;
            overflow-y: auto;
            border-left: 2px solid #0f0;
        }
        
        .data-section {
            margin-bottom: 15px;
            border: 1px solid #333;
            padding: 10px;
        }
        
        .data-section h3 {
            color: #0ff;
            font-size: 12px;
            margin-bottom: 8px;
        }
        
        .data-row {
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            margin: 3px 0;
            padding: 2px 0;
        }
        
        .data-label {
            color: #888;
        }
        
        .data-value {
            color: #0f0;
        }
        
        .data-value.warning {
            color: #ff0;
        }
        
        .data-value.critical {
            color: #f00;
        }
        
        #console {
            grid-column: 1 / -1;
            background: #0a0a0a;
            padding: 10px;
            overflow-y: auto;
            border-top: 2px solid #0f0;
            font-size: 11px;
        }
        
        .console-line {
            margin: 2px 0;
            color: #0f0;
        }
        
        .console-line.info { color: #0ff; }
        .console-line.warning { color: #ff0; }
        .console-line.error { color: #f00; }
        
        .layer-selector {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
            margin-bottom: 10px;
        }
        
        .layer-btn {
            padding: 5px 10px;
            background: #222;
            border: 1px solid #333;
            color: #888;
            cursor: pointer;
            font-size: 10px;
        }
        
        .layer-btn.active {
            background: #0f0;
            color: #000;
            border-color: #0f0;
        }
        
        .slider-control {
            margin: 10px 0;
        }
        
        .slider-control label {
            display: block;
            color: #888;
            font-size: 11px;
            margin-bottom: 3px;
        }
        
        .slider-control input[type="range"] {
            width: 100%;
        }
        
        .slider-value {
            color: #0f0;
            font-size: 11px;
        }
        
        #timeControls {
            display: flex;
            gap: 5px;
            margin-top: 10px;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #222;
            border: 1px solid #333;
            margin: 5px 0;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0f0, #0ff);
            transition: width 0.3s;
        }
        
        .progress-label {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 10px;
            line-height: 20px;
            color: #000;
            mix-blend-mode: difference;
        }
    </style>
</head>
<body>
    <div id="mainContainer">
        <div id="header">
            <h1 id="planetName">Planet Simulation</h1>
            <div id="planetInfo">Loading...</div>
        </div>
        
        <div id="toolPanel">
            <div class="tool-section">
                <h3>VIEW LAYERS</h3>
                <div class="layer-selector">
                    <button class="layer-btn active" data-layer="topography">Terrain</button>
                    <button class="layer-btn active" data-layer="water">Water</button>
                    <button class="layer-btn active" data-layer="biomes">Biomes</button>
                    <button class="layer-btn" data-layer="temperature">Temp</button>
                    <button class="layer-btn" data-layer="pressure">Pressure</button>
                    <button class="layer-btn" data-layer="atmosphere">Atmosphere</button>
                </div>
            </div>
            
            <div class="tool-section">
                <h3>TOOLS</h3>
                <button class="tool-button" data-tool="inspect">üîç Inspect</button>
                <button class="tool-button" data-tool="terraform">üåç Terraform</button>
                <button class="tool-button" data-tool="seed-life">ü¶† Seed Life</button>
                <button class="tool-button" data-tool="weather">üåßÔ∏è Weather Control</button>
                <button class="tool-button" data-tool="tectonics">‚õ∞Ô∏è Tectonics</button>
            </div>
            
            <div class="tool-section" id="terraformTools" style="display:none;">
                <h3>TERRAFORM OPTIONS</h3>
                <div class="slider-control">
                    <label>Temperature Offset</label>
                    <input type="range" id="tempOffset" min="-50" max="50" value="0" step="1">
                    <span class="slider-value" id="tempOffsetValue">0 K</span>
                </div>
                <div class="slider-control">
                    <label>Add Water (%)</label>
                    <input type="range" id="waterAdd" min="0" max="50" value="0" step="1">
                    <span class="slider-value" id="waterAddValue">0%</span>
                </div>
                <div class="slider-control">
                    <label>Add Atmosphere (bars)</label>
                    <input type="range" id="pressureAdd" min="0" max="2" value="0" step="0.1">
                    <span class="slider-value" id="pressureAddValue">0.0</span>
                </div>
                <button class="tool-button" onclick="applyTerraform()">Apply Changes</button>
            </div>
            
            <div class="tool-section">
                <h3>SIMULATION</h3>
                <div id="timeControls">
                    <button class="tool-button" onclick="sim.pause()">‚è∏Ô∏è Pause</button>
                    <button class="tool-button" onclick="sim.play()">‚ñ∂Ô∏è Play</button>
                    <button class="tool-button" onclick="sim.fast()">‚è© Fast</button>
                </div>
                <div class="slider-control">
                    <label>Sim Speed</label>
                    <input type="range" id="simSpeed" min="1" max="100" value="10">
                    <span class="slider-value" id="simSpeedValue">10 days/sec</span>
                </div>
            </div>
        </div>
        
        <canvas id="mapCanvas" width="800" height="600"></canvas>
        
        <div id="dataPanel">
            <div class="data-section">
                <h3>ATMOSPHERE</h3>
                <div class="data-row">
                    <span class="data-label">Pressure:</span>
                    <span class="data-value" id="atmo-pressure">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">Temperature:</span>
                    <span class="data-value" id="atmo-temp">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">O‚ÇÇ:</span>
                    <span class="data-value" id="atmo-o2">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">CO‚ÇÇ:</span>
                    <span class="data-value" id="atmo-co2">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">N‚ÇÇ:</span>
                    <span class="data-value" id="atmo-n2">--</span>
                </div>
            </div>
            
            <div class="data-section">
                <h3>HYDROSPHERE</h3>
                <div class="data-row">
                    <span class="data-label">Water Coverage:</span>
                    <span class="data-value" id="hydro-coverage">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">Ocean Mass:</span>
                    <span class="data-value" id="hydro-ocean">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">Ice Mass:</span>
                    <span class="data-value" id="hydro-ice">--</span>
                </div>
            </div>
            
            <div class="data-section">
                <h3>BIOSPHERE</h3>
                <div class="data-row">
                    <span class="data-label">Biodiversity:</span>
                    <span class="data-value" id="bio-diversity">--</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="bio-diversity-bar" style="width: 0%"></div>
                    <div class="progress-label">0%</div>
                </div>
                <div class="data-row">
                    <span class="data-label">Habitability:</span>
                    <span class="data-value" id="bio-habitability">--</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="bio-habitability-bar" style="width: 0%"></div>
                    <div class="progress-label">0%</div>
                </div>
                <div class="data-row">
                    <span class="data-label">Life Forms:</span>
                    <span class="data-value" id="bio-lifeforms">--</span>
                </div>
            </div>
            
            <div class="data-section">
                <h3>GEOSPHERE</h3>
                <div class="data-row">
                    <span class="data-label">Geological Activity:</span>
                    <span class="data-value" id="geo-activity">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">Tectonic Active:</span>
                    <span class="data-value" id="geo-tectonic">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">Volcanism:</span>
                    <span class="data-value" id="geo-volcano">--</span>
                </div>
            </div>
            
            <div class="data-section">
                <h3>SELECTED TILE</h3>
                <div class="data-row">
                    <span class="data-label">Coordinates:</span>
                    <span class="data-value" id="tile-coords">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">Elevation:</span>
                    <span class="data-value" id="tile-elevation">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">Biome:</span>
                    <span class="data-value" id="tile-biome">--</span>
                </div>
                <div class="data-row">
                    <span class="data-label">Temperature:</span>
                    <span class="data-value" id="tile-temp">--</span>
                </div>
            </div>
        </div>
        
        <div id="console">
            <div class="console-line info">&gt; System initialized. Ready for planet simulation.</div>
        </div>
    </div>

    <script>
        // Main simulation controller
        class PlanetSimulation {
            constructor(planetId) {
                this.planetId = planetId;
                this.canvas = document.getElementById('mapCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.planetData = null;
                this.selectedTool = 'inspect';
                this.activeLayers = new Set(['topography', 'water', 'biomes']);
                this.simulating = false;
                this.simSpeed = 10;
                this.simDay = 0;
                
                this.init();
            }
            
            async init() {
                await this.loadPlanetData();
                this.setupEventListeners();
                this.render();
                this.updateDataPanel();
            }
            
            async loadPlanetData() {
                try {
                    // Load from your Rails API
                    const response = await fetch(`/api/v1/celestial_bodies/${this.planetId}`);
                    this.planetData = await response.json();
                    
                    document.getElementById('planetName').textContent = this.planetData.name;
                    document.getElementById('planetInfo').textContent = 
                        `${this.planetData.type} | Radius: ${(this.planetData.radius/1000).toFixed(0)} km | Gravity: ${this.planetData.gravity?.toFixed(2)}g`;
                    
                    this.log(`Loaded planet: ${this.planetData.name}`, 'info');
                } catch (error) {
                    this.log(`Error loading planet: ${error.message}`, 'error');
                }
            }
            
            setupEventListeners() {
                // Layer toggles
                document.querySelectorAll('.layer-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const layer = e.target.dataset.layer;
                        e.target.classList.toggle('active');
                        
                        if (this.activeLayers.has(layer)) {
                            this.activeLayers.delete(layer);
                        } else {
                            this.activeLayers.add(layer);
                        }
                        this.render();
                    });
                });
                
                // Tool buttons
                document.querySelectorAll('.tool-button[data-tool]').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        document.querySelectorAll('.tool-button[data-tool]').forEach(b => b.classList.remove('active'));
                        e.target.classList.add('active');
                        this.selectedTool = e.target.dataset.tool;
                        
                        // Show/hide terraform tools
                        document.getElementById('terraformTools').style.display = 
                            this.selectedTool === 'terraform' ? 'block' : 'none';
                    });
                });
                
                // Canvas click
                this.canvas.addEventListener('click', (e) => this.handleMapClick(e));
                
                // Sliders
                document.getElementById('tempOffset').addEventListener('input', (e) => {
                    document.getElementById('tempOffsetValue').textContent = `${e.target.value} K`;
                });
                
                document.getElementById('waterAdd').addEventListener('input', (e) => {
                    document.getElementById('waterAddValue').textContent = `${e.target.value}%`;
                });
                
                document.getElementById('pressureAdd').addEventListener('input', (e) => {
                    document.getElementById('pressureAddValue').textContent = e.target.value;
                });
                
                document.getElementById('simSpeed').addEventListener('input', (e) => {
                    this.simSpeed = parseInt(e.target.value);
                    document.getElementById('simSpeedValue').textContent = `${e.target.value} days/sec`;
                });
            }
            
            render() {
                const { width, height } = this.canvas;
                this.ctx.fillStyle = '#000';
                this.ctx.fillRect(0, 0, width, height);
                
                if (!this.planetData) return;
                
                // Simple globe projection
                const centerX = width / 2;
                const centerY = height / 2;
                const radius = Math.min(width, height) * 0.4;
                
                // Draw planet sphere
                for (let y = 0; y < height; y++) {
                    for (let x = 0; x < width; x++) {
                        const dx = x - centerX;
                        const dy = y - centerY;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance <= radius) {
                            // Convert to lat/lon
                            const lat = Math.asin(dy / radius) * (180 / Math.PI);
                            const lon = Math.atan2(dx, Math.sqrt(radius * radius - dx * dx - dy * dy)) * (180 / Math.PI);
                            
                            const color = this.getPixelColor(lat, lon);
                            this.ctx.fillStyle = color;
                            this.ctx.fillRect(x, y, 1, 1);
                        }
                    }
                }
                
                // Draw atmosphere glow
                this.ctx.strokeStyle = 'rgba(0, 255, 255, 0.3)';
                this.ctx.lineWidth = 10;
                this.ctx.beginPath();
                this.ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                this.ctx.stroke();
            }
            
            getPixelColor(lat, lon) {
                // Determine color based on active layers and planet data
                const absLat = Math.abs(lat);
                
                // Base terrain color
                let r = 80, g = 60, b = 40; // Rocky default
                
                if (this.activeLayers.has('topography')) {
                    // Elevation-based coloring (simplified)
                    const elevation = Math.sin(lat * Math.PI / 180) * 3000;
                    if (elevation > 2000) {
                        r = 200; g = 200; b = 200; // Mountains
                    } else if (elevation > 500) {
                        r = 139; g = 90; b = 43; // Hills
                    }
                }
                
                if (this.activeLayers.has('water')) {
                    // Water coverage from hydrosphere
                    const waterCoverage = this.planetData.hydrosphere?.water_coverage || 0;
                    if (Math.random() * 100 < waterCoverage) {
                        r = 0; g = 50; b = 150; // Ocean
                    }
                }
                
                if (this.activeLayers.has('biomes')) {
                    // Biome coloring based on latitude
                    if (absLat > 66) {
                        r = 240; g = 240; b = 255; // Polar ice
                    } else if (absLat > 50) {
                        r = 34; g = 139; b = 34; // Taiga
                    } else if (absLat > 30) {
                        r = 124; g = 252; b = 0; // Grassland
                    } else {
                        r = 0; g = 100; b = 0; // Tropical
                    }
                }
                
                if (this.activeLayers.has('temperature')) {
                    const temp = this.planetData.surface_temperature || 288;
                    const tempColor = Math.floor((temp - 200) / 200 * 255);
                    r = tempColor; g = 0; b = 255 - tempColor;
                }
                
                return `rgb(${r}, ${g}, ${b})`;
            }
            
            handleMapClick(e) {
                const rect = this.canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;
                const dx = x - centerX;
                const dy = y - centerY;
                const radius = Math.min(this.canvas.width, this.canvas.height) * 0.4;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance <= radius) {
                    const lat = Math.asin(dy / radius) * (180 / Math.PI);
                    const lon = Math.atan2(dx, Math.sqrt(radius * radius - dx * dx - dy * dy)) * (180 / Math.PI);
                    
                    this.handleToolAction(lat, lon);
                }
            }
            
            async handleToolAction(lat, lon) {
                switch(this.selectedTool) {
                    case 'inspect':
                        this.inspectTile(lat, lon);
                        break;
                    case 'seed-life':
                        await this.seedLife(lat, lon);
                        break;
                    case 'terraform':
                        this.log(`Terraform selected at (${lat.toFixed(1)}, ${lon.toFixed(1)})`, 'info');
                        break;
                }
            }
            
            inspectTile(lat, lon) {
                document.getElementById('tile-coords').textContent = `${lat.toFixed(2)}¬∞, ${lon.toFixed(2)}¬∞`;
                document.getElementById('tile-elevation').textContent = `${(Math.sin(lat * Math.PI / 180) * 3000).toFixed(0)}m`;
                document.getElementById('tile-biome').textContent = this.getBiomeName(lat);
                document.getElementById('tile-temp').textContent = `${(this.planetData.surface_temperature - Math.abs(lat) * 0.5).toFixed(1)}K`;
            }
            
            getBiomeName(lat) {
                const absLat = Math.abs(lat);
                if (absLat > 66) return 'Polar Ice';
                if (absLat > 50) return 'Tundra';
                if (absLat > 30) return 'Temperate';
                return 'Tropical';
            }
            
            async seedLife(lat, lon) {
                try {
                    const response = await fetch(`/api/v1/celestial_bodies/${this.planetId}/biosphere/seed_life`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ latitude: lat, longitude: lon })
                    });
                    
                    if (response.ok) {
                        this.log(`Life seeded at (${lat.toFixed(1)}, ${lon.toFixed(1)})`, 'info');
                        await this.loadPlanetData();
                        this.updateDataPanel();
                    }
                } catch (error) {
                    this.log(`Failed to seed life: ${error.message}`, 'error');
                }
            }
            
            updateDataPanel() {
                if (!this.planetData) return;
                
                // Atmosphere
                const atmo = this.planetData.atmosphere || {};
                document.getElementById('atmo-pressure').textContent = `${(atmo.pressure || 0).toFixed(2)} bar`;
                document.getElementById('atmo-temp').textContent = `${(atmo.temperature || 0).toFixed(1)} K`;
                document.getElementById('atmo-o2').textContent = `${(atmo.composition?.O2 || 0).toFixed(1)}%`;
                document.getElementById('atmo-co2').textContent = `${(atmo.composition?.CO2 || 0).toFixed(1)}%`;
                document.getElementById('atmo-n2').textContent = `${(atmo.composition?.N2 || 0).toFixed(1)}%`;
                
                // Hydrosphere
                const hydro = this.planetData.hydrosphere || {};
                document.getElementById('hydro-coverage').textContent = `${(hydro.water_coverage || 0).toFixed(1)}%`;
                document.getElementById('hydro-ocean').textContent = `${this.formatMass(hydro.liquid_bodies?.oceans || 0)}`;
                document.getElementById('hydro-ice').textContent = `${this.formatMass(hydro.liquid_bodies?.ice_caps || 0)}`;
                
                // Biosphere
                const bio = this.planetData.biosphere || {};
                const biodiversity = (bio.biodiversity_index || 0) * 100;
                const habitability = (bio.habitable_ratio || 0) * 100;
                
                document.getElementById('bio-diversity').textContent = `${biodiversity.toFixed(1)}%`;
                document.getElementById('bio-diversity-bar').style.width = `${biodiversity}%`;
                document.getElementById('bio-habitability').textContent = `${habitability.toFixed(1)}%`;
                document.getElementById('bio-habitability-bar').style.width = `${habitability}%`;
                document.getElementById('bio-lifeforms').textContent = bio.life_forms_count || 0;
                
                // Geosphere
                const geo = this.planetData.geosphere || {};
                document.getElementById('geo-activity').textContent = `${geo.geological_activity || 0}/100`;
                document.getElementById('geo-tectonic').textContent = geo.tectonic_activity ? 'Yes' : 'No';
                document.getElementById('geo-volcano').textContent = geo.volcanic_activity || 'None';
            }
            
            formatMass(mass) {
                if (mass > 1e18) return `${(mass / 1e18).toFixed(2)} Eg`;
                if (mass > 1e15) return `${(mass / 1e15).toFixed(2)} Pg`;
                if (mass > 1e12) return `${(mass / 1e12).toFixed(2)} Tg`;
                return `${mass.toFixed(2)} kg`;
            }
            
            log(message, type = 'info') {
                const console = document.getElementById('console');
                const line = document.createElement('div');
                line.className = `console-line ${type}`;
                line.textContent = `> ${message}`;
                console.appendChild(line);
                console.scrollTop = console.scrollHeight;
            }
            
            play() {
                if (!this.simulating) {
                    this.simulating = true;
                    this.log('Simulation started', 'info');
                    this.simulationLoop();
                }
            }
            
            pause() {
                this.simulating = false;
                this.log('Simulation paused', 'warning');
            }
            
            fast() {
                this.simSpeed = 100;
                document.getElementById('simSpeed').value = 100;
                document.getElementById('simSpeedValue').textContent = '100 days/sec';
                this.play();
            }
            
            async simulationLoop() {
                if (!this.simulating) return;
                
                this.simDay += this.simSpeed;
                
                // Call simulation tick API
                try {
                    await fetch(`/api/v1/celestial_bodies/${this.planetId}/simulate`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ days: this.simSpeed })
                    });
                    
                    await this.loadPlanetData();
                    this.updateDataPanel();
                    this.render();
                } catch (error) {
                    this.log(`Simulation error: ${error.message}`, 'error');
                }
                
                setTimeout(() => this.simulationLoop(), 1000);
            }
        }
        
        // Global functions
<function_calls>
<invoke name="artifacts">
<parameter name="command">update</parameter>
<parameter name="id">planet_interactive_interface</parameter>
<parameter name="old_str">        // Global functions</parameter>
<parameter name="new_str">        // Global functions
let sim;
    async function applyTerraform() {
        const tempOffset = parseFloat(document.getElementById('tempOffset').value);
        const waterAdd = parseFloat(document.getElementById('waterAdd').value);
        const pressureAdd = parseFloat(document.getElementById('pressureAdd').value);
        
        try {
            const response = await fetch(`/api/v1/celestial_bodies/${sim.planetId}/terraform`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                    temperature_offset: tempOffset,
                    water_increase_percent: waterAdd,
                    pressure_increase: pressureAdd
                })
            });
            
            if (response.ok) {
                sim.log('Terraforming applied successfully', 'info');
                await sim.loadPlanetData();
                sim.updateDataPanel();
                sim.render();
            } else {
                sim.log('Terraforming failed', 'error');
            }
        } catch (error) {
            sim.log(`Terraforming error: ${error.message}`, 'error');
        }
    }
    
    // Initialize when page loads
    window.addEventListener('load', () => {
        // Get planet ID from URL or default to 1
        const urlParams = new URLSearchParams(window.location.search);
        const planetId = urlParams.get('planet_id') || 1;
        
        sim = new PlanetSimulation(planetId);
    });
</script>
</body>
</html></parameter>        
