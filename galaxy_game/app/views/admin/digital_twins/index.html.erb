<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="<%= form_authenticity_token %>">
    <title>Digital Twins - Galaxy Game Admin</title>
    <%= stylesheet_link_tag 'admin/monitor', media: 'all' %>
</head>
<body>
    <div id="mainContainer" style="grid-template-columns: 300px 1fr; grid-template-rows: 80px 1fr;">
        <!-- Header -->
        <div id="header" style="grid-column: 1 / -1;">
            <h1>DIGITAL TWIN SANDBOX</h1>
            <div id="planetInfo">
                Isolated planetary simulations for settlement and terraforming analysis |
                <%= link_to 'üè† Admin Dashboard', '/admin', style: 'color: #0ff; text-decoration: none;' %>
            </div>
        </div>

        <!-- Left Panel: Available Bodies -->
        <div id="toolPanel">
            <div class="tool-section">
                <h3>üåç CREATE DIGITAL TWIN</h3>
                <% @celestial_bodies = CelestialBodies::CelestialBody.all %>
                <% @celestial_bodies.each do |body| %>
                    <%= button_to "Create Twin: #{body.name}",
                                  admin_digital_twins_path(celestial_body_id: body.id),
                                  method: :post,
                                  class: 'tool-button',
                                  style: 'margin: 2px 0; font-size: 11px;' %>
                <% end %>
            </div>

            <div class="tool-section">
                <h3>üìä ACTIVE TWINS</h3>
                <% @digital_twins.each do |twin| %>
                    <button class="tool-button" onclick="location.href='/admin/digital_twins/<%= twin[:id] %>'">
                        <%= twin[:name] %>
                    </button>
                <% end %>
                <% if @digital_twins.empty? %>
                    <p style="color: #666; font-size: 11px; margin: 10px 0;">No active digital twins</p>
                <% end %>
            </div>
        </div>

        <!-- Main Content Area -->
        <div id="mainContent" style="padding: 20px;">
            <div class="planet-header" style="background: #1a1a1a; border: 1px solid #0f0; padding: 20px; margin-bottom: 20px;">
                <h2 style="color: #0ff; margin: 0 0 10px 0;">Digital Twin Overview</h2>
                <p style="color: #888; margin: 0;">
                    Digital twins provide isolated "what-if" simulations for planetary analysis.
                    Use them to test settlement viability, terraforming strategies, and disaster scenarios
                    without affecting the live game world.
                </p>
            </div>

            <div style="background: #1a1a1a; border: 1px solid #333; padding: 20px;">
                <h3 style="color: #0ff; margin-bottom: 15px;">Available Celestial Bodies</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                    <% @celestial_bodies.each do |body| %>
                        <div style="background: #111; border: 1px solid #333; padding: 15px;">
                            <h4 style="color: #0ff; margin: 0 0 8px 0;"><%= body.name %></h4>
                            <p style="color: #888; font-size: 12px; margin: 0 0 10px 0;">
                                <%= body.type.demodulize.humanize %> |
                                Temp: <%= body.surface_temperature&.round || '?' %>K
                            </p>
                            <%= button_to 'Create Digital Twin',
                                          admin_digital_twins_path(celestial_body_id: body.id),
                                          method: :post,
                                          class: 'btn',
                                          style: 'width: 100%; padding: 8px; background: #222; border: 1px solid #0f0; color: #0f0; cursor: pointer;' %>
                        </div>
                    <% end %>
                </div>
            </div>
        </div>
    </div>
</body>
</html>