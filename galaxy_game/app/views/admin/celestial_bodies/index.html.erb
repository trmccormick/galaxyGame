<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="<%= form_authenticity_token %>">
    <title>Galaxy Game - Admin Celestial Bodies</title>
    <%= stylesheet_link_tag 'admin/monitor', media: 'all' %>
    <style>
        .body-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .body-card {
            background: #1a1a1a;
            border: 1px solid #0f0;
            padding: 20px;
            border-radius: 5px;
            transition: all 0.2s;
        }

        .body-card:hover {
            border-color: #0ff;
            background: #222;
        }

        .body-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .body-name {
            color: #0ff;
            font-size: 18px;
            font-weight: bold;
        }

        .body-type {
            padding: 4px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .body-type.star {
            background: #ffd700;
            color: #000;
        }

        .body-type.brown_dwarf {
            background: #daa520;
            color: #000;
        }

        .body-type.terrestrial_planet,
        .body-type.carbon_planet,
        .body-type.lava_world,
        .body-type.super_earth,
        .body-type.gas_giant,
        .body-type.ice_giant,
        .body-type.hot_jupiter,
        .body-type.hycean_planet,
        .body-type.ocean_planet,
        .body-type.water_world {
            background: #0f0;
            color: #000;
        }

        .body-type.moon,
        .body-type.large_moon,
        .body-type.small_moon,
        .body-type.ice_moon {
            background: #ff0;
            color: #000;
        }

        .body-type.asteroid,
        .body-type.comet,
        .body-type.dwarf_planet,
        .body-type.kuiper_belt_object {
            background: #f00;
            color: #fff;
        }

        .body-type.alien_life_form {
            background: #f0f;
            color: #fff;
        }

        .body-type.material {
            background: #0ff;
            color: #000;
        }

        .body-type.unknown {
            background: #666;
            color: #fff;
        }

        .body-description {
            color: #ccc;
            font-size: 14px;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .body-details {
            background: #0a0a0a;
            padding: 10px;
            border-radius: 3px;
            margin-bottom: 15px;
        }

        .body-detail {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 12px;
        }

        .body-detail-label {
            color: #888;
        }

        .body-detail-value {
            color: #0f0;
            font-weight: bold;
        }

        .body-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            padding: 8px 16px;
            background: #222;
            border: 1px solid #0f0;
            color: #0f0;
            text-decoration: none;
            border-radius: 3px;
            font-size: 12px;
            transition: all 0.2s;
            cursor: pointer;
        }

        .action-btn:hover {
            background: #0f0;
            color: #000;
        }

        .action-btn.primary {
            background: #0f0;
            color: #000;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: #1a1a1a;
            border: 1px solid #333;
            padding: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: 24px;
            color: #0ff;
            font-weight: bold;
            margin: 5px 0;
        }

        .stat-label {
            font-size: 12px;
            color: #888;
            text-transform: uppercase;
        }

        .type-section {
            margin-bottom: 30px;
        }

        .type-header {
            color: #0ff;
            font-size: 16px;
            margin-bottom: 15px;
            padding-bottom: 5px;
            border-bottom: 1px solid #333;
        }
    </style>
</head>
<body>
    <div id="mainContainer" style="grid-template-columns: 250px 1fr; grid-template-rows: 80px 1fr;">
        <!-- Header -->
        <div id="header" style="grid-column: 1 / -1;">
            <h1>GALAXY GAME - CELESTIAL BODIES CATALOG</h1>
            <div id="planetInfo">
                System Status: <span style="color: #0f0;">OPERATIONAL</span> |
                Celestial Bodies: <span style="color: #0ff;"><%= @total_bodies %></span> |
                Version: 1.0.0-alpha
            </div>
        </div>

        <!-- Left Panel: Admin Navigation -->
        <div id="toolPanel">
            <div class="tool-section">
                <h3>üéØ ADMIN SECTIONS</h3>
                <button class="tool-button" onclick="window.location.href='/admin/ai_manager/missions'">
                    ü§ñ AI Manager
                </button>
                <button class="tool-button" onclick="window.location.href='/admin/celestial_bodies'">
                    üåç Celestial Bodies
                </button>
                <button class="tool-button" onclick="window.location.href='/admin/development_corporations'">
                    üè¢ NPC Corporations
                </button>
                <button class="tool-button" onclick="window.location.href='/admin/settlements'">
                    üèóÔ∏è Settlements
                </button>
                <button class="tool-button" onclick="window.location.href='/admin/resources'">
                    üí∞ Resources & Economy
                </button>
                <button class="tool-button" onclick="window.location.href='/admin/simulation'">
                    ‚öôÔ∏è Simulation Control
                </button>
            </div>

            <div class="tool-section">
                <h3>üß™ QUICK ACTIONS</h3>
                <button class="tool-button" onclick="window.location.href='/'">
                    üè† Main Game
                </button>
                <button class="tool-button" onclick="window.location.href='/sidekiq'">
                    üìä Background Jobs
                </button>
                <button class="tool-button" onclick="refreshDashboard()">
                    üîÑ Refresh Dashboard
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div id="mainContent">
            <div class="content-section">
                <h2>üåç CELESTIAL BODIES CATALOG</h2>

                <!-- System Statistics -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value"><%= @total_bodies %></div>
                        <div class="stat-label">Total Bodies</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value"><%= @category_stats[:stars] %></div>
                        <div class="stat-label">Stars</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value"><%= @category_stats[:planets] %></div>
                        <div class="stat-label">Planets</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value"><%= @category_stats[:moons] %></div>
                        <div class="stat-label">Moons</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value"><%= @category_stats[:minor_bodies] %></div>
                        <div class="stat-label">Minor Bodies</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value"><%= @category_stats[:other] %></div>
                        <div class="stat-label">Other</div>
                    </div>
                </div>

                <!-- Celestial Bodies by Category -->
                <% @bodies_by_category.each do |category, bodies| %>
                    <div class="type-section">
                        <div class="type-header"><%= category.humanize.titleize %> (<%= bodies.count %>)</div>
                        <div class="body-grid">
                            <% bodies.each do |body| %>
                                <div class="body-card">
                                    <div class="body-header">
                                        <div class="body-name"><%= body.name %></div>
                                        <div class="body-type <%= category %>"><%= category.humanize %></div>
                                    </div>
                                    <div class="body-description">
                                        <%= body.description || "No description available" %>
                                    </div>
                                    <div class="body-details">
                                        <div class="body-detail">
                                            <span class="body-detail-label">Mass:</span>
                                            <span class="body-detail-value"><%= body.mass ? "#{body.mass} kg" : "Unknown" %></span>
                                        </div>
                                        <div class="body-detail">
                                            <span class="body-detail-label">Radius:</span>
                                            <span class="body-detail-value"><%= body.radius ? "#{(body.radius / 1000.0).round(0)} km" : "Unknown" %></span>
                                        </div>
                                        <div class="body-detail">
                                            <span class="body-detail-label">Temperature:</span>
                                            <span class="body-detail-value"><%= body.temperature ? "#{body.temperature}¬∞C" : "Unknown" %></span>
                                        </div>
                                        <div class="body-detail">
                                            <span class="body-detail-label">Atmosphere:</span>
                                            <span class="body-detail-value"><%= body.atmosphere ? "Present" : "None" %></span>
                                        </div>
                                    </div>
                                    <div class="body-actions">
                                        <a href="<%= monitor_admin_celestial_body_path(body) %>" class="action-btn primary">üñ•Ô∏è Monitor</a>
                                        <a href="<%= celestial_body_path(body) %>" class="action-btn">üëÅÔ∏è View Details</a>
                                    </div>
                                </div>
                            <% end %>
                        </div>
                    </div>
                <% end %>

                <% if @celestial_bodies.empty? %>
                    <div style="text-align: center; color: #666; padding: 40px;">
                        <div style="font-size: 48px; margin-bottom: 20px;">üåç</div>
                        <div>No celestial bodies found in the database.</div>
                        <div style="font-size: 12px; margin-top: 10px;">This interface shows all celestial bodies in the game. Bodies will appear here once they are loaded into the database.</div>
                    </div>
                <% end %>
            </div>
        </div>
    </div>

    <script>
        function refreshDashboard() {
            window.location.reload();
        }
    </script>
</body>
</html>