module Blueprint
  class MaterialGenerator
    def self.generate_material(material_data)
      base_template = load_base_template
      
      {
        "id": material_data["material"].downcase.gsub(" ", "_"),
        "name": material_data["material"],
        "type": "material",
        "description": material_data["description"],
        "weight": {
          "amount": material_data["weight_per_unit"] || base_template["properties"]["weight_per_unit"],
          "unit": "kilogram"
        },
        "storage": base_template["properties"]["storage"],
        "source": material_data["source"],
        "reprocessing": base_template["properties"]["reprocessing"]
      }
    end

    private

    def self.load_base_template
      JSON.parse(
        File.read(
          Rails.root.join('data', 'json-data', 'templates', 'base_material.json')
        )
      )
    end
  end
end